seed: 42

model:
  model_id: "Qwen/Qwen2-VL-2B-Instruct"
  torch_dtype: "bfloat16"
  device_map: "auto"
  use_flash_attn: false

inference:
  temperature: 0.0
  top_p: 1.0
  top_k: 1
  do_sample: false
  num_beams: 1
  repetition_penalty: 1.0
  
  max_new_tokens:
    json_restore: 1024
    needle: 128
  
  visual_token:
    patch_size: 14
    prefer_processor: true

data:
  tasks: ["json_restore", "needle"]
  length_buckets: [1024, 2048, 4096, 8192, 16384]
  samples_per_bucket: 200

codecs:
  - type: "text"
  
  - type: "render"
    font_size: 14
    line_width: 80
    dpi: 150
  
  - type: "codebook"
    color_mode: "4color"
    cell_size: 4
    max_grid: 192
  
  - type: "codebook_external"
    format: "qrcode"
    error_correction: "L"
    max_bytes_per_symbol: 1200

augment:
  enabled: true
  levels:
    - name: "clean"
      scale: 1.0
      rotation: 0
      jpeg_quality: 100
      blur_sigma: 0
      noise_std: 0
    - name: "light"
      scale: [0.9, 1.1]
      rotation: [-5, 5]
      jpeg_quality: 85
      blur_sigma: 0.5
      noise_std: 0.01
    - name: "heavy"
      scale: [0.7, 1.3]
      rotation: [-15, 15]
      jpeg_quality: 60
      blur_sigma: 1.5
      noise_std: 0.05

output:
  save_images: true
  save_prompts: true
  results_file: "outputs/results/results.jsonl"
